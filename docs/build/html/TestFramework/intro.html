

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Testing Asset Pricing Models &#8212; Factor Models with Machine Learning 0.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'TestFramework/intro';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Linear Regression: Static Models with Observable Factors" href="../LinearRegressions/intro.html" />
    <link rel="prev" title="Background" href="../Background/intro.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    <p class="title logo__title">Factor Models with Machine Learning 0.1 documentation</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Background/intro.html">Background</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Testing Asset Pricing Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LinearRegressions/intro.html">Linear Regression: Static Models with Observable Factors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PCA/intro.html">Principal Component Analysis: Static Models with Latent Factors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../InstrumentedPCA/intro.html">Instrumented PCA: Conditional Models with Latent Factors and Observable Characteristics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/TestFramework/intro.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Testing Asset Pricing Models</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#characteristic-managed-portfolios">Characteristic-Managed Portfolios</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scoring">Scoring</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sorting-procedure">Sorting Procedure</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#weighting-scheme">Weighting Scheme</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#portfolio-returns">Portfolio Returns</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#statistical-performance-with-total-and-predictive-r-squared">Statistical Performance with Total and Predictive R-Squared</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#total-r-squared">Total R-Squared</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#predictive-r-squared">Predictive R-Squared</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#risk-premia-v-s-mispricing">Risk Premia v.s. Mispricing</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="testing-asset-pricing-models">
<h1>Testing Asset Pricing Models<a class="headerlink" href="#testing-asset-pricing-models" title="Permalink to this headline">#</a></h1>
<p>Objective asset pricing models: explaining cross-sections of returns.</p>
<section id="characteristic-managed-portfolios">
<h2>Characteristic-Managed Portfolios<a class="headerlink" href="#characteristic-managed-portfolios" title="Permalink to this headline">#</a></h2>
<p>We are going to construct characteristic-managed portfolios to form test assets.</p>
<p>The general approach is the following:</p>
<ul class="simple">
<li><p>start with a universe <span class="math notranslate nohighlight">\(\mathcal{U}\)</span> of stocks</p></li>
<li><p>define a rebalancing period (e.g. every month, every quarter, every year)</p></li>
<li><p>for each rebalancing date <span class="math notranslate nohighlight">\(t_{\tau}\)</span>:</p>
<ul>
<li><p>define a score <span class="math notranslate nohighlight">\(\mathbb{S}_i(t_{\tau})\)</span> for each stock <span class="math notranslate nohighlight">\(i\)</span></p></li>
<li><p>stocks with high scores are selected to form the long exposure <span class="math notranslate nohighlight">\(\mathcal{L}(t_{\tau})\)</span> of the characteritstic</p></li>
<li><p>stocks with low scores are selected to form the short exposure <span class="math notranslate nohighlight">\(\mathcal{S}(t_{\tau})\)</span> of the characteristic</p></li>
</ul>
</li>
<li><p>specify a weighting scheme <span class="math notranslate nohighlight">\(w_i(t_{\tau})\)</span>, for example value weighted or equally weighted</p></li>
<li><p>compute the returns performance of the characteristic-managed portfolio <span class="math notranslate nohighlight">\(\mathcal{C}(t)\)</span></p></li>
</ul>
<section id="scoring">
<h3>Scoring<a class="headerlink" href="#scoring" title="Permalink to this headline">#</a></h3>
<p>Let’s write <span class="math notranslate nohighlight">\(x_i(t_{\tau})\)</span> at the rebalancing date <span class="math notranslate nohighlight">\(t_{\tau}\)</span>, and <span class="math notranslate nohighlight">\(\mathbb{S}_i(t_{\tau})\)</span> is the resulting score.</p>
<p>We can score the characteristics following a min-max rescaling over <span class="math notranslate nohighlight">\([-1, 1]\)</span>, such as:</p>
<div class="amsmath math notranslate nohighlight" id="equation-85d9931b-a676-4b36-b9e1-41296377e22f">
<span class="eqno">(1)<a class="headerlink" href="#equation-85d9931b-a676-4b36-b9e1-41296377e22f" title="Permalink to this equation">#</a></span>\[\begin{equation}
\mathbb{S}_i(t_{\tau}) = 2 \frac{x_{i}(t_{\tau}) - \min(x(t_{\tau}))}{\max(x(t_{\tau}))-\min(x(t_{\tau}))} - 1
\end{equation}\]</div>
<p>The rescaling method must be applied separately for each rebalancing date.</p>
<hr class="docutils" />
<p><strong>Example 1</strong></p>
<p><em>Let’s have a numerical example. We have 10 assets and the corresponding characteritic data. We find the following parameters of our scoring function: <span class="math notranslate nohighlight">\(\max(x) = 120.9\)</span> and <span class="math notranslate nohighlight">\(\min(x) = 2.6\)</span>. We then apply the scoring function to each characteristic value.</em></p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Asset</p></th>
<th class="head"><p>Characteristic</p></th>
<th class="head"><p>Score</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(A_1\)</span></p></td>
<td><p>34.2</p></td>
<td><p>-0.4658</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(A_2\)</span></p></td>
<td><p>65.4</p></td>
<td><p>0.0617</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(A_3\)</span></p></td>
<td><p>12.3</p></td>
<td><p>-0.8360</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(A_4\)</span></p></td>
<td><p>32.7</p></td>
<td><p>-0.4911</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(A_5\)</span></p></td>
<td><p>98.1</p></td>
<td><p>0.6145</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(A_6\)</span></p></td>
<td><p>7.4</p></td>
<td><p>-0.9189</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(A_7\)</span></p></td>
<td><p>2.6</p></td>
<td><p>-1</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(A_8\)</span></p></td>
<td><p>120.9</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(A_9\)</span></p></td>
<td><p>12.4</p></td>
<td><p>-0.8343</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(A_{10}\)</span></p></td>
<td><p>56.0</p></td>
<td><p>-0.0972</p></td>
</tr>
</tbody>
</table>
<p><a class="reference external" href="https://github.com/tlorans/FactorInvesting/blob/main/materials/matlab/chap1/example1.m">Matlab code</a></p>
<p><a class="reference external" href="https://github.com/tlorans/FactorInvesting/blob/main/materials/julia/chap1/example1.jl">Julia code</a></p>
</section>
<hr class="docutils" />
<section id="sorting-procedure">
<h3>Sorting Procedure<a class="headerlink" href="#sorting-procedure" title="Permalink to this headline">#</a></h3>
<p>As a simple approach, we can form five quintile portfolios:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\mathcal{Q}_1\)</span> corresponds to the stocks the highest scores (top 20%)</p></li>
<li><p><span class="math notranslate nohighlight">\(\mathcal{Q}_2\)</span>,<span class="math notranslate nohighlight">\(\mathcal{Q}_3\)</span>,<span class="math notranslate nohighlight">\(\mathcal{Q}_4\)</span>, are the second, third and fourth quintile portfolios</p></li>
<li><p><span class="math notranslate nohighlight">\(\mathcal{Q}_5\)</span> corresponds to the stocks with the lowest scores (bottom 20%)</p></li>
</ul>
<p>The long portolio <span class="math notranslate nohighlight">\(\mathcal{L}\)</span> will comprise the stocks in the first quintile <span class="math notranslate nohighlight">\(\mathcal{Q}_1\)</span>, while the short portfolio <span class="math notranslate nohighlight">\(\mathcal{S}\)</span> will comprise the stocks in the last quintile <span class="math notranslate nohighlight">\(\mathcal{Q}_5\)</span>.</p>
<hr class="docutils" />
<p><strong>Example 2</strong></p>
<p><em>We continue the previous example 1. We rank stocks according to their score and assign the corresponding qunatile.</em></p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Asset</p></th>
<th class="head"><p>Score</p></th>
<th class="head"><p>Rank</p></th>
<th class="head"><p>Quintile</p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(\mathcal{L}\)</span> / <span class="math notranslate nohighlight">\(\mathcal{S}\)</span></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(A_1\)</span></p></td>
<td><p>-0.4658</p></td>
<td><p>5</p></td>
<td><p><span class="math notranslate nohighlight">\(\mathcal{Q}_3\)</span></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(A_2\)</span></p></td>
<td><p>0.0617</p></td>
<td><p>3</p></td>
<td><p><span class="math notranslate nohighlight">\(\mathcal{Q}_2\)</span></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(A_3\)</span></p></td>
<td><p>-0.8360</p></td>
<td><p>8</p></td>
<td><p><span class="math notranslate nohighlight">\(\mathcal{Q}_4\)</span></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(A_4\)</span></p></td>
<td><p>-0.4911</p></td>
<td><p>6</p></td>
<td><p><span class="math notranslate nohighlight">\(\mathcal{Q}_3\)</span></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(A_5\)</span></p></td>
<td><p>0.6145</p></td>
<td><p>2</p></td>
<td><p><span class="math notranslate nohighlight">\(\mathcal{Q}_1\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\mathcal{L}\)</span></p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(A_6\)</span></p></td>
<td><p>-0.9189</p></td>
<td><p>9</p></td>
<td><p><span class="math notranslate nohighlight">\(\mathcal{Q}_5\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\mathcal{S}\)</span></p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(A_7\)</span></p></td>
<td><p>-1</p></td>
<td><p>10</p></td>
<td><p><span class="math notranslate nohighlight">\(\mathcal{Q}_5\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\mathcal{S}\)</span></p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(A_8\)</span></p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p><span class="math notranslate nohighlight">\(\mathcal{Q}_1\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\mathcal{L}\)</span></p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(A_9\)</span></p></td>
<td><p>-0.8343</p></td>
<td><p>7</p></td>
<td><p><span class="math notranslate nohighlight">\(\mathcal{Q}_4\)</span></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(A_{10}\)</span></p></td>
<td><p>-0.0972</p></td>
<td><p>4</p></td>
<td><p><span class="math notranslate nohighlight">\(\mathcal{Q}_2\)</span></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<p><a class="reference external" href="https://github.com/tlorans/FactorInvesting/blob/main/materials/matlab/chap1/example1.m">Matlab code</a></p>
<p><a class="reference external" href="https://github.com/tlorans/FactorInvesting/blob/main/materials/julia/chap1/example1.jl">Julia code</a></p>
</section>
<hr class="docutils" />
<section id="weighting-scheme">
<h3>Weighting Scheme<a class="headerlink" href="#weighting-scheme" title="Permalink to this headline">#</a></h3>
</section>
<section id="portfolio-returns">
<h3>Portfolio Returns<a class="headerlink" href="#portfolio-returns" title="Permalink to this headline">#</a></h3>
</section>
</section>
<section id="statistical-performance-with-total-and-predictive-r-squared">
<h2>Statistical Performance with Total and Predictive R-Squared<a class="headerlink" href="#statistical-performance-with-total-and-predictive-r-squared" title="Permalink to this headline">#</a></h2>
<p>We follow Kelly et al. (2019) <span id="id1">[<a class="reference internal" href="../references.html#id2" title="Bryan T Kelly, Seth Pruitt, and Yinan Su. Characteristics are covariances: a unified model of risk and return. Journal of Financial Economics, 134(3):501–524, 2019.">KPS19</a>]</span> to test the asset pricing performance of the factor models with “total <span class="math notranslate nohighlight">\(R^2\)</span>” and “predictive <span class="math notranslate nohighlight">\(R^2\)</span>.</p>
<p>To understand the difference between both measures, let’s start with the definition of the “traditional” <span class="math notranslate nohighlight">\(R^2\)</span>.</p>
<p>The coefficient of determination, or <span class="math notranslate nohighlight">\(R^2\)</span>, is computed as:</p>
<div class="amsmath math notranslate nohighlight" id="equation-0676da40-55b8-41da-8706-eff4aeb8ffe0">
<span class="eqno">(2)<a class="headerlink" href="#equation-0676da40-55b8-41da-8706-eff4aeb8ffe0" title="Permalink to this equation">#</a></span>\[\begin{equation}
R^2 = 1 - \frac{SSR}{SST}
\end{equation}\]</div>
<p>where <span class="math notranslate nohighlight">\(SSR\)</span> stands for sum squared of the residuals and <span class="math notranslate nohighlight">\(SST\)</span> stands for the total sum of squares, that is the su of the distance the data is away from the mean all squared.</p>
<p>The sum squared regression (SSR) is defined as:</p>
<div class="amsmath math notranslate nohighlight" id="equation-0c031d03-6c67-42e6-90fa-0c097c7c9688">
<span class="eqno">(3)<a class="headerlink" href="#equation-0c031d03-6c67-42e6-90fa-0c097c7c9688" title="Permalink to this equation">#</a></span>\[\begin{equation}
SSR = \sum_i(y_i -\hat{y_i})^2
\end{equation}\]</div>
<p>where <span class="math notranslate nohighlight">\(y_i\)</span> is the true value, <span class="math notranslate nohighlight">\(\hat{y}_i\)</span> is the estimated value.</p>
<p>The total sum of squares (SST) is defined as:</p>
<div class="amsmath math notranslate nohighlight" id="equation-2837b6fb-4e6e-4b0d-b7b7-5249258e2fd8">
<span class="eqno">(4)<a class="headerlink" href="#equation-2837b6fb-4e6e-4b0d-b7b7-5249258e2fd8" title="Permalink to this equation">#</a></span>\[\begin{equation}
SST = \sum_i(y_i - \bar{y})^2
\end{equation}\]</div>
<p>where <span class="math notranslate nohighlight">\(\bar{y}\)</span> is the mean of the observations.</p>
<p>In the factor models, the “true” values are the realized returns <span class="math notranslate nohighlight">\(r_{i,t}\)</span>, where <span class="math notranslate nohighlight">\(i\)</span> is the return of the characteristic-managed portfolio <span class="math notranslate nohighlight">\(i\)</span>.</p>
<p>Following Kelly et al. (2019) <span id="id2">[<a class="reference internal" href="../references.html#id2" title="Bryan T Kelly, Seth Pruitt, and Yinan Su. Characteristics are covariances: a unified model of risk and return. Journal of Financial Economics, 134(3):501–524, 2019.">KPS19</a>]</span>, we assume the sample average of the observations <span class="math notranslate nohighlight">\(\bar{r_i}\)</span> to be equal to 0. Thus, the SST is common to both the total <span class="math notranslate nohighlight">\(R^2\)</span> and predictive <span class="math notranslate nohighlight">\(R^2\)</span> and defined as:</p>
<div class="amsmath math notranslate nohighlight" id="equation-94acb7d0-3fee-4a3d-95a5-8a169623d265">
<span class="eqno">(5)<a class="headerlink" href="#equation-94acb7d0-3fee-4a3d-95a5-8a169623d265" title="Permalink to this equation">#</a></span>\[\begin{equation}
SST = \sum_{i,t} r_{i,t}^2
\end{equation}\]</div>
<section id="total-r-squared">
<h3>Total R-Squared<a class="headerlink" href="#total-r-squared" title="Permalink to this headline">#</a></h3>
<p>The total <span class="math notranslate nohighlight">\(R^2\)</span> quantifies the explanatory power of contemporaneous factor realizations. It summarizes how well the systematic factor risk in a given model specificiation describes the realized riskiness in the panel of individual stocks.</p>
<p>In this framework, the estimated <span class="math notranslate nohighlight">\(\hat{r}_{i,t}\)</span> to be compared with the realized return <span class="math notranslate nohighlight">\(r_{i,t}\)</span> is defined as:</p>
<div class="amsmath math notranslate nohighlight" id="equation-f9ba2f9f-ed89-4b65-9071-a1b3fae2c3c6">
<span class="eqno">(6)<a class="headerlink" href="#equation-f9ba2f9f-ed89-4b65-9071-a1b3fae2c3c6" title="Permalink to this equation">#</a></span>\[\begin{equation}
\hat{r}_{i,t} = \hat{\beta}'_{i,t-1}\hat{f}_t
\end{equation}\]</div>
<p>The SSR is thus defined as:</p>
<div class="amsmath math notranslate nohighlight" id="equation-e4f60754-b9a8-4251-9fac-8b0ba063ceba">
<span class="eqno">(7)<a class="headerlink" href="#equation-e4f60754-b9a8-4251-9fac-8b0ba063ceba" title="Permalink to this equation">#</a></span>\[\begin{equation}
SSR = \sum_{i,t}(r_{i,t} - \hat{\beta}'_{i,t-1}\hat{f}_t)^2
\end{equation}\]</div>
<p>The full formula of the total <span class="math notranslate nohighlight">\(R^2\)</span> is thus:</p>
<div class="amsmath math notranslate nohighlight" id="equation-651eab3e-0ffd-44ea-bbdc-64cdf44bde77">
<span class="eqno">(8)<a class="headerlink" href="#equation-651eab3e-0ffd-44ea-bbdc-64cdf44bde77" title="Permalink to this equation">#</a></span>\[\begin{equation}
\text{Total $R^2$} = 1 - \frac{\sum_{i,t}(r_{i,t} - \hat{\beta}'_{i,t-1}\hat{f}_t)^2}{\sum_{i,t} r_{i,t}^2}
\end{equation}\]</div>
</section>
<section id="predictive-r-squared">
<h3>Predictive R-Squared<a class="headerlink" href="#predictive-r-squared" title="Permalink to this headline">#</a></h3>
<p>The second measure that we refer to as the “predictive <span class="math notranslate nohighlight">\(R^2\)</span>” represents the the accuracy of the asset pricing model predictions of future returns.</p>
<p>In that case, the estimated <span class="math notranslate nohighlight">\(\hat{r}_{i,t}\)</span> is the predicted one from previous month information (including the factor return). We have:</p>
<div class="amsmath math notranslate nohighlight" id="equation-e13e1445-01cf-4306-8b84-2c0540c5a5b4">
<span class="eqno">(9)<a class="headerlink" href="#equation-e13e1445-01cf-4306-8b84-2c0540c5a5b4" title="Permalink to this equation">#</a></span>\[\begin{equation}
\hat{r}_{i,t} = \hat{\beta}'_{i,t-1} \hat{\lambda}_{t-1}
\end{equation}\]</div>
<p>where <span class="math notranslate nohighlight">\(\hat{\lambda}_{t-1}\)</span> is the sample average of <span class="math notranslate nohighlight">\(\hat{f}\)</span> up to the previous month (<span class="math notranslate nohighlight">\(t-1\)</span>).</p>
<p>In that case, we have the following SSR:</p>
<div class="amsmath math notranslate nohighlight" id="equation-34607502-72b6-4a67-b700-60680ca93f18">
<span class="eqno">(10)<a class="headerlink" href="#equation-34607502-72b6-4a67-b700-60680ca93f18" title="Permalink to this equation">#</a></span>\[\begin{equation}
SSR = \sum_{i,t}(r_{i,t} - \hat{\beta}'_{i,t-1}\hat{\lambda}_{t-1})^2
\end{equation}\]</div>
<p>And thus the following complete formula for the predictive <span class="math notranslate nohighlight">\(R^2\)</span>:</p>
<div class="amsmath math notranslate nohighlight" id="equation-68b67ce9-521b-4b92-85ba-3991024cd975">
<span class="eqno">(11)<a class="headerlink" href="#equation-68b67ce9-521b-4b92-85ba-3991024cd975" title="Permalink to this equation">#</a></span>\[\begin{equation}
\text{Predictive $R^2$} = 1 - \frac{\sum_{i,t}(r_{i,t} - \hat{\beta}'_{i,t-1}\hat{\lambda}_{t-1})^2}{\sum_{i,t} r_{i,t}^2}
\end{equation}\]</div>
</section>
</section>
<section id="risk-premia-v-s-mispricing">
<h2>Risk Premia v.s. Mispricing<a class="headerlink" href="#risk-premia-v-s-mispricing" title="Permalink to this headline">#</a></h2>
<p>This test investigate whether ou factor models accurately “price” characteristics-managed portfolios (or anomaly portfolios) uncoditionally, following Gu et al. (2021) <span id="id3">[<a class="reference internal" href="../references.html#id3" title="Shihao Gu, Bryan Kelly, and Dacheng Xiu. Autoencoder asset pricing models. Journal of Econometrics, 222(1):429–450, 2021.">GKX21</a>]</span>.</p>
<p>As we implement all our models without intercepts, we can directly test whether the zero-intercept no-arbitrage restriction is satisfied. If it is, the time series average of model residuals for each portfolios, that is the pricing errors, should be indistinguishable from zero (two side test). The uncoditional pricing errors are defined as:</p>
<div class="amsmath math notranslate nohighlight" id="equation-e947f01a-da72-41ac-9a05-47fe8f74a8b6">
<span class="eqno">(12)<a class="headerlink" href="#equation-e947f01a-da72-41ac-9a05-47fe8f74a8b6" title="Permalink to this equation">#</a></span>\[\begin{equation}
\alpha_i = \mathbb{E}[u_{i,t}] = \mathbb{E}[r_i,t] - \mathbb{E}[\beta_{i,t-1}'f_t]
\end{equation}\]</div>
</section>
</section>


                </article>
              

              
              
                <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="../Background/intro.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Background</p>
      </div>
    </a>
    <a class="right-next"
       href="../LinearRegressions/intro.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Linear Regression: Static Models with Observable Factors</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#characteristic-managed-portfolios">Characteristic-Managed Portfolios</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scoring">Scoring</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sorting-procedure">Sorting Procedure</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#weighting-scheme">Weighting Scheme</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#portfolio-returns">Portfolio Returns</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#statistical-performance-with-total-and-predictive-r-squared">Statistical Performance with Total and Predictive R-Squared</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#total-r-squared">Total R-Squared</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#predictive-r-squared">Predictive R-Squared</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#risk-premia-v-s-mispricing">Risk Premia v.s. Mispricing</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            <div class="bd-footer-content__inner">
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Thomas Lorans
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023, Thomas Lorans.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div></div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>